{
    "search": [
        {
            "name": "construct-beckn-response-context",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "construct-beckn-response-context.jsonata",
                "outputKey": "becknResponseContext",
                "common": "true"
            }
        },
        {
            "name": "get-provider-id",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "extract-provider-id-from-request.jsonata",
                "outputKey": "vendureToken",
                "common": "true"
            }
        },
        {
            "name": "get-all-categories",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getCategories.graphql",
                "outputDataPath": "body.data.facets.items",
                "outputKey": "allCategories"
            }
        },
        {
            "name": "get-tag-and-category-filter",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "extract-tag-filter-from-request.jsonata",
                "outputKey": "tagsAndCatFilter",
                "common": "true"
            }
        },
        {
            "name": "get-facets",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getFacets.graphql",
                "variablesKey": "tagsAndCatFilter.summary",
                "outputDataPath": "body.data.facets",
                "outputKey": "facetsAndValues"
            },
            "condition": "!! context.tagsAndCatFilter?.summary?.facets?.length > 0"
        },
        {
            "name": "construct-facet-values-filter",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "construct-facet-values-filter.jsonata",
                "outputKey": "facetValuesFilter",
                "common": "true"
            }
        },
        {
            "name": "construct-search-request",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "search-beckn-request.jsonata",
                "outputKey": "searchInput"
            }
        },
        {
            "name": "check-if-valid-search",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "check-if-search-valid.jsonata",
                "outputKey": "validSearch",
                "common": "true"
            }
        },
        {
            "name": "send-search-graphql-request",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "search.graphql",
                "variablesKey": "searchInput",
                "outputKey": "searchResponse"
            },
            "condition": "context.validSearch"
        },
        {
            "name": "extract-product-variant-ids",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "product-variant-ids-from-search-result.jsonata",
                "outputKey": "productVariantIds",
                "common": "true"
            },
            "condition": "context.validSearch"
        },
        {
            "name": "get-sellers-of-product-variants",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getProductVariantDetails.graphql",
                "variablesKey": "productVariantIds",
                "outputKey": "productVariantSellers",
                "outputDataPath": "body.data.getProductVariantDetails.items"
            },
            "condition": "context.validSearch && context.productVariantIds.productVariantIds.length > 0"
        },
        {
            "name": "get-product-variant-grouped-by-seller",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "group-variants-by-sellers.jsonata",
                "outputKey": "providersWithItems",
                "common": "true"
            },
            "condition": "context.validSearch && context.productVariantIds.productVariantIds.length > 0"
        },
        {
            "name": "generate-beckn-response",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "on-search-beckn-response.jsonata",
                "outputKey": "becknResponse"
            },
            "condition": "context.validSearch && context.productVariantIds.productVariantIds.length > 0"
        }
    ],
    "select": [
        {
            "name": "construct-beckn-response-context",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "construct-beckn-response-context.jsonata",
                "outputKey": "becknResponseContext",
                "common": "true"
            }
        },
        {
            "name": "get-provider-id",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "extract-provider-id-from-order-request.jsonata",
                "outputKey": "vendureToken",
                "common": "true"
            }
        },
        {
            "name": "extract-transaction-id",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "extract-transaction-id-from-beckn.jsonata",
                "outputKey": "becknTransactionId",
                "common": "true"
            }
        },
        {
            "name": "get-existing-beckn-transaction",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getBecknTransaction.graphql",
                "variablesKey": "becknTransactionId",
                "outputDataPath": "body.data.getBecknTransaction.vendureAuthToken",
                "outputKey": "vendureAuthToken"
            }
        },
        {
            "name": "set-existing-auth-token",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "check-if-vendure-auth-token-exists.jsonata",
                "outputKey": "usingExistingVendureAuthToken",
                "common": "true"
            }
        },
        {
            "name": "erase-existing-cart",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "removeAllOrderLines.graphql",
                "outputKey": "removeAllOrderLinesResult",
                "outputDataPath": "body.data"
            },
            "condition": "context.usingExistingVendureAuthToken"
        },
        {
            "name": "extract-select-params",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "select-beckn-request.jsonata",
                "outputKey": "cartDetails"
            }
        },
        {
            "name": "add-first-item-to-order",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "addItemToOrder.graphql",
                "variablesKey": "cartDetails.firstItem",

                "outputKey": "responseWithVendureAuthToken"
            }
        },
        {
            "name": "extract-vendure-auth-token",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "extract-vendure-auth-token-from-graphql-response.jsonata",
                "outputKey": "vendureAuthToken",
                "common": "true"
            },
            "condition": "!context.usingExistingVendureAuthToken"
        },
        {
            "name": "add-remaining-items-to-order",
            "type": "send-multiple-graphql-requests",
            "args": {
                "graphqlFilename": "addItemToOrder.graphql",
                "variablesKey": "cartDetails.restItems",

                "outputKey": "addRestItemsToOrderResponse"
            },
            "condition": "context.cartDetails.totalItems > 1"
        },
        {
            "name": "form-beckn-transaction-variables",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "form-beckn-transaction-variables.jsonata",
                "common": "true",
                "outputKey": "addBecknTransactionVariables"
            },
            "condition": "!context.usingExistingVendureAuthToken"
        },
        {
            "name": "add-beckn-transaction",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "addBecknTransaction.graphql",
                "variablesKey": "addBecknTransactionVariables",
                "outputKey": "addBecknTransactionOutput"
            },
            "condition": "!context.usingExistingVendureAuthToken"
        },
        {
            "name": "get-current-order",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "activeOrderOnSelect.graphql",

                "outputKey": "currentOrderResponse"
            }
        },
        {
            "name": "get-current-seller",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "currentSeller.graphql",
                "outputKey": "currentSellerResponse"
            }
        },
        {
            "name": "get-eligible-shipping-methods",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "eligibleShippingMethods.graphql",
                "outputKey": "eligibleShippingMethods",
                "outputDataPath": "body.data.eligibleShippingMethods"
            }
        },
        {
            "name": "generate-beckn-response",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "on-select-beckn-response.jsonata",
                "outputKey": "becknResponse"
            }
        }
    ],
    "init": [
        {
            "name": "construct-beckn-response-context",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "construct-beckn-response-context.jsonata",
                "outputKey": "becknResponseContext",
                "common": "true"
            }
        },
        {
            "name": "get-provider-id",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "extract-provider-id-from-order-request.jsonata",
                "outputKey": "vendureToken",
                "common": "true"
            }
        },
        {
            "name": "extract-order-id",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "extract-order-id-from-beckn.jsonata",
                "outputKey": "existingOrderId",
                "common": "true"
            },
            "condition": "context.becknRequest.body?.message?.order?.id"
        },
        {
            "name": "get-existing-beckn-transaction-from-vendure-auth-token",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getBecknTransactionFromVendureAuthToken.graphql",
                "variablesKey": "existingOrderId",
                "outputDataPath": "body.data.getBecknTransactionFromVendureAuthToken.vendureAuthToken",
                "outputKey": "vendureAuthToken"
            },
            "condition": "context.becknRequest.body?.message?.order?.id"
        },
        {
            "name": "extract-transaction-id",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "extract-transaction-id-from-beckn.jsonata",
                "outputKey": "becknTransactionId",
                "common": "true"
            },
            "condition": "!context.vendureAuthToken"
        },
        {
            "name": "get-existing-beckn-transaction",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getBecknTransaction.graphql",
                "variablesKey": "becknTransactionId",
                "outputDataPath": "body.data.getBecknTransaction.vendureAuthToken",
                "outputKey": "vendureAuthToken"
            },
            "condition": "!context.vendureAuthToken"
        },
        {
            "name": "set-existing-auth-token",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "check-if-vendure-auth-token-exists.jsonata",
                "outputKey": "usingExistingVendureAuthToken",
                "common": "true"
            }
        },
        {
            "name": "erase-existing-cart",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "removeAllOrderLines.graphql",

                "outputKey": "removeAllOrderLinesResult",
                "outputDataPath": "body.data"
            },
            "condition": "context.usingExistingVendureAuthToken"
        },
        {
            "name": "extract-init-params",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "init-beckn-request.jsonata",
                "outputKey": "cartDetails"
            }
        },
        {
            "name": "add-first-item-to-order",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "addItemToOrder.graphql",
                "variablesKey": "cartDetails.firstItem",

                "outputKey": "responseWithVendureAuthToken"
            }
        },
        {
            "name": "extract-vendure-auth-token",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "extract-vendure-auth-token-from-graphql-response.jsonata",
                "outputKey": "vendureAuthToken",
                "common": "true"
            },
            "condition": "!context.usingExistingVendureAuthToken"
        },
        {
            "name": "add-remaining-items-to-order",
            "type": "send-multiple-graphql-requests",
            "args": {
                "graphqlFilename": "addItemToOrder.graphql",
                "variablesKey": "cartDetails.restItems",

                "outputKey": "addRestItemsToOrderResponse"
            },
            "condition": "context.cartDetails.totalItems > 1"
        },
        {
            "name": "form-beckn-transaction-variables",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "form-beckn-transaction-variables.jsonata",
                "common": "true",
                "outputKey": "addBecknTransactionVariables"
            },
            "condition": "!context.usingExistingVendureAuthToken"
        },
        {
            "name": "add-beckn-transaction",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "addBecknTransaction.graphql",
                "variablesKey": "addBecknTransactionVariables",
                "outputKey": "addBecknTransactionOutput"
            },
            "condition": "!context.usingExistingVendureAuthToken"
        },
        {
            "name": "get-eligible-shipping-methods",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "eligibleShippingMethods.graphql",

                "outputKey": "eligibleShippingMethods",
                "outputDataPath": "body.data.eligibleShippingMethods"
            }
        },
        {
            "name": "get-shipping-method-id",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "shipping-method-code-to-id.jsonata",
                "common": "true",
                "outputKey": "setOrderShippingMethodInput"
            }
        },
        {
            "name": "set-order-shipping-method",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "setOrderShippingMethod.graphql",

                "variablesKey": "setOrderShippingMethodInput",
                "outputKey": "setOrderShippingMethodResult",
                "outputDataPath": "body.data"
            }
        },
        {
            "name": "set-customer-for-order",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "setCustomerForOrder.graphql",

                "variablesKey": "cartDetails.setCustomerForOrderInput",
                "outputKey": "setCustomerForOrderResult",
                "outputDataPath": "body.data"
            }
        },
        {
            "name": "set-order-shipping-address",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "setOrderShippingAddress.graphql",

                "variablesKey": "cartDetails.setOrderShippingAddressInput",
                "outputKey": "setOrderShippingAddressResult",
                "outputDataPath": "body.data"
            },
            "condition": "Object.keys(context.cartDetails.setOrderShippingAddressInput).length !== 0"
        },
        {
            "name": "set-order-billing-address",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "setOrderBillingAddress.graphql",

                "variablesKey": "cartDetails.setOrderBillingAddressInput",
                "outputKey": "setOrderBillingAddressResult",
                "outputDataPath": "body.data"
            }
        },
        {
            "name": "get-eligible-payment-methods",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "eligiblePaymentMethods.graphql",

                "outputKey": "eligiblePaymentMethods",
                "outputDataPath": "body.data.eligiblePaymentMethods"
            }
        },
        {
            "name": "get-current-order",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "activeOrderOnInit.graphql",

                "outputKey": "currentOrderResponse",
                "outputDataPath": "body.data"
            }
        },
        {
            "name": "get-current-seller",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "currentSeller.graphql",

                "outputKey": "currentSellerResponse"
            }
        },
        {
            "name": "generate-beckn-response",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "on-init-beckn-response.jsonata",
                "outputKey": "becknResponse"
            }
        }
    ],
    "confirm": [
        {
            "name": "construct-beckn-response-context",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "construct-beckn-response-context.jsonata",
                "outputKey": "becknResponseContext",
                "common": "true"
            }
        },
        {
            "name": "get-provider-id",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "extract-provider-id-from-order-request.jsonata",
                "outputKey": "vendureToken",
                "common": "true"
            }
        },
        {
            "name": "extract-order-id",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "extract-order-id-from-beckn.jsonata",
                "outputKey": "existingOrderId",
                "common": "true"
            },
            "condition": "context.becknRequest.body?.message?.order?.id"
        },
        {
            "name": "get-existing-beckn-transaction-from-vendure-auth-token",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getBecknTransactionFromVendureAuthToken.graphql",
                "variablesKey": "existingOrderId",
                "outputDataPath": "body.data.getBecknTransactionFromVendureAuthToken.vendureAuthToken",
                "outputKey": "vendureAuthToken"
            },
            "condition": "context.becknRequest.body?.message?.order?.id"
        },
        {
            "name": "extract-transaction-id",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "extract-transaction-id-from-beckn.jsonata",
                "outputKey": "becknTransactionId",
                "common": "true"
            },
            "condition": "!context.vendureAuthToken"
        },
        {
            "name": "get-existing-beckn-transaction",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getBecknTransaction.graphql",
                "variablesKey": "becknTransactionId",
                "outputDataPath": "body.data.getBecknTransaction.vendureAuthToken",
                "outputKey": "vendureAuthToken"
            },
            "condition": "!context.vendureAuthToken"
        },
        {
            "name": "set-existing-auth-token",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "check-if-vendure-auth-token-exists.jsonata",
                "outputKey": "usingExistingVendureAuthToken",
                "common": "true"
            }
        },
        {
            "name": "get-order-initial",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "activeOrderOnInit.graphql",

                "outputKey": "orderInitialState",
                "outputDataPath": "body.data.activeOrder"
            }
        },
        {
            "name": "check-if-order-can-be-modified",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "check-if-order-can-be-modified.jsonata",
                "outputKey": "orderCanBeModified",
                "common": "true"
            }
        },
        {
            "name": "erase-existing-cart",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "removeAllOrderLines.graphql",

                "outputKey": "removeAllOrderLinesResult",
                "outputDataPath": "body.data"
            },
            "condition": "context.orderCanBeModified && context.usingExistingVendureAuthToken"
        },
        {
            "name": "extract-confirm-params",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "confirm-beckn-request.jsonata",
                "outputKey": "cartDetails"
            }
        },
        {
            "name": "add-first-item-to-order",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "addItemToOrder.graphql",
                "variablesKey": "cartDetails.firstItem",

                "outputKey": "responseWithVendureAuthToken"
            },
            "condition": "context.orderCanBeModified"
        },
        {
            "name": "extract-vendure-auth-token",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "extract-vendure-auth-token-from-graphql-response.jsonata",
                "outputKey": "vendureAuthToken",
                "common": "true"
            },
            "condition": "!context.usingExistingVendureAuthToken"
        },
        {
            "name": "add-remaining-items-to-order",
            "type": "send-multiple-graphql-requests",
            "args": {
                "graphqlFilename": "addItemToOrder.graphql",
                "variablesKey": "cartDetails.restItems",

                "outputKey": "addRestItemsToOrderResponse"
            },
            "condition": "context.orderCanBeModified && context.cartDetails.totalItems > 1"
        },
        {
            "name": "form-beckn-transaction-variables",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "form-beckn-transaction-variables.jsonata",
                "common": "true",
                "outputKey": "addBecknTransactionVariables"
            },
            "condition": "!context.usingExistingVendureAuthToken"
        },
        {
            "name": "add-beckn-transaction",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "addBecknTransaction.graphql",
                "variablesKey": "addBecknTransactionVariables",
                "outputKey": "addBecknTransactionOutput"
            },
            "condition": "!context.usingExistingVendureAuthToken"
        },
        {
            "name": "get-eligible-shipping-methods",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "eligibleShippingMethods.graphql",

                "outputKey": "eligibleShippingMethods",
                "outputDataPath": "body.data.eligibleShippingMethods"
            }
        },
        {
            "name": "get-shipping-method-id",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "shipping-method-code-to-id.jsonata",
                "common": "true",
                "outputKey": "setOrderShippingMethodInput"
            }
        },
        {
            "name": "set-order-shipping-method",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "setOrderShippingMethod.graphql",

                "variablesKey": "setOrderShippingMethodInput",
                "outputKey": "setOrderShippingMethodResult",
                "outputDataPath": "body.data"
            },
            "condition": "context.orderCanBeModified"
        },
        {
            "name": "set-customer-for-order",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "setCustomerForOrder.graphql",

                "variablesKey": "cartDetails.setCustomerForOrderInput",
                "outputKey": "setCustomerForOrderResult",
                "outputDataPath": "body.data"
            },
            "condition": "context.orderCanBeModified"
        },
        {
            "name": "set-order-shipping-address",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "setOrderShippingAddress.graphql",

                "variablesKey": "cartDetails.setOrderShippingAddressInput",
                "outputKey": "setOrderShippingAddressResult",
                "outputDataPath": "body.data"
            },
            "condition": "context.orderCanBeModified && Object.keys(context.cartDetails.setOrderShippingAddressInput).length !== 0"
        },
        {
            "name": "set-order-billing-address",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "setOrderBillingAddress.graphql",

                "variablesKey": "cartDetails.setOrderBillingAddressInput",
                "outputKey": "setOrderBillingAddressResult",
                "outputDataPath": "body.data"
            },
            "condition": "context.orderCanBeModified"
        },
        {
            "name": "get-eligible-payment-methods",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "eligiblePaymentMethods.graphql",

                "outputKey": "eligiblePaymentMethods",
                "outputDataPath": "body.data.eligiblePaymentMethods"
            }
        },
        {
            "name": "form-payment-details-input",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "form-payment-details-input.jsonata",
                "outputKey": "setPaymentDetailsInput",
                "common": "true"
            }
        },
        {
            "name": "set-payment-details-input",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "setOrderCustomFields.graphql",
                "variablesKey": "setPaymentDetailsInput",
                "outputKey": "setPaymentDetailsOutput",
                "outputDataPath": "body.data"
            }
        },
        {
            "name": "transition-order-to-arranging-payment",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "transitionOrderToArrangingPayment.graphql",
                "outputKey": "arrangingPaymentOutput",
                "outputDataPath": "body.data.transitionOrderToState"
            },
            "condition": "!context.orderInitialState || context.orderInitialState.state !== 'ArrangingPayment' "
        },
        {
            "name": "get-current-order",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "activeOrderOnConfirm.graphql",
                "outputKey": "currentOrderResponse",
                "outputDataPath": "body.data"
            }
        },
        {
            "name": "get-current-seller",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "currentSeller.graphql",

                "outputKey": "currentSellerResponse"
            }
        },
        {
            "name": "form-add-vendure-order-id-input",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "form-add-vendure-order-id-input.jsonata",
                "outputKey": "addVendureOrderIdInput",
                "common": "true"
            }
        },
        {
            "name": "add-vendure-orderId-to-beckn-transaction",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "addVendureOrderIdToBecknTransaction.graphql",
                "variablesKey": "addVendureOrderIdInput",
                "outputKey": "addVendureOrderIdResponse",
                "outputDataPath": "body.data.addVendureOrderIdToBecknTransaction"
            }
        },
        {
            "name": "generate-beckn-response",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "on-confirm-beckn-response.jsonata",
                "outputKey": "becknResponse"
            }
        }
    ],
    "status": [
        {
            "name": "construct-beckn-response-context",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "construct-beckn-response-context.jsonata",
                "outputKey": "becknResponseContext",
                "common": "true"
            }
        },
        {
            "name": "extract-status-params",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "status-beckn-request.jsonata",
                "outputKey": "getBecknOrderInput"
            }
        },
        {
            "name": "get-vendure-token",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getVendureToken.graphql",
                "variablesKey": "getBecknOrderInput",
                "outputKey": "vendureToken",
                "outputDataPath": "body.data.getVendureToken"
            }
        },
        {
            "name": "get-beckn-order",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getBecknOrder.graphql",
                "variablesKey": "getBecknOrderInput",
                "outputKey": "becknOrder",
                "outputDataPath": "body.data.getBecknOrder"
            }
        },
        {
            "name": "get-current-seller",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "currentSeller.graphql",
                "outputKey": "currentSellerResponse"
            }
        },
        {
            "name": "generate-beckn-response",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "on-status-beckn-response.jsonata",
                "outputKey": "becknResponse"
            }
        }
    ],
    "cancel": [
        {
            "name": "construct-beckn-response-context",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "construct-beckn-response-context.jsonata",
                "outputKey": "becknResponseContext",
                "common": "true"
            }
        },
        {
            "name": "extract-cancel-params-to-get-initial-order",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "status-beckn-request.jsonata",
                "outputKey": "getBecknOrderInput"
            }
        },
        {
            "name": "get-vendure-token",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getVendureToken.graphql",
                "variablesKey": "getBecknOrderInput",
                "outputKey": "vendureToken",
                "outputDataPath": "body.data.getVendureToken"
            }
        },
        {
            "name": "get-current-seller",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "currentSeller.graphql",
                "outputKey": "currentSellerResponse"
            }
        },
        {
            "name": "get-beckn-order",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getBecknOrder.graphql",
                "variablesKey": "getBecknOrderInput",
                "outputKey": "becknOrder",
                "outputDataPath": "body.data.getBecknOrder"
            }
        },
        {
            "name": "extract-cancel-params",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "cancel-beckn-request.jsonata",
                "outputKey": "cancelBecknOrderInput"
            }
        },
        {
            "name": "cancel-beckn-order",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "cancelBecknOrder.graphql",
                "variablesKey": "cancelBecknOrderInput",
                "outputKey": "cancelBecknOrderResult",
                "outputDataPath": "body.data.cancelBecknOrder"
            },
            "condition": "context.becknOrder.state !== 'Cancelled'"
        },
        {
            "name": "generate-beckn-response",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "on-cancel-beckn-response.jsonata",
                "outputKey": "becknResponse"
            }
        }
    ],
    "track": [
        {
            "name": "construct-beckn-response-context",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "construct-beckn-response-context.jsonata",
                "outputKey": "becknResponseContext",
                "common": "true"
            }
        },
        {
            "name": "extract-track-params-to-get-initial-order",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "status-beckn-request.jsonata",
                "outputKey": "getBecknOrderInput"
            }
        },
        {
            "name": "get-vendure-token",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getVendureToken.graphql",
                "variablesKey": "getBecknOrderInput",
                "outputKey": "vendureToken",
                "outputDataPath": "body.data.getVendureToken"
            }
        },
        {
            "name": "get-beckn-order",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getBecknOrder.graphql",
                "variablesKey": "getBecknOrderInput",
                "outputKey": "becknOrder",
                "outputDataPath": "body.data.getBecknOrder"
            }
        },
        {
            "name": "generate-beckn-response",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "on-track-beckn-response.jsonata",
                "outputKey": "becknResponse"
            }
        }
    ],
    "rating": [
        {
            "name": "construct-beckn-response-context",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "construct-beckn-response-context.jsonata",
                "outputKey": "becknResponseContext",
                "common": "true"
            }
        },
        {
            "name": "extract-rating-request-info",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "rating-beckn-request.jsonata",
                "outputKey": "ratingRequestInfo"
            }
        },
        {
            "name": "get-product-from-product-variant",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getProductVariantDetails.graphql",
                "variablesKey": "ratingRequestInfo.target_query_input",
                "outputKey": "productDetails",
                "outputDataPath": "body.data.getProductVariantDetails.items.0.product"
            },
            "condition": "context.ratingRequestInfo.rating_target === 'Product'"
        },
        {
            "name": "construct-product-review-input",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "construct-product-review-input.jsonata",
                "outputKey": "productReviewInput",
                "common": "true"
            },
            "condition": "context.ratingRequestInfo.rating_target === 'Product'"
        },
        {
            "name": "submit-product-review",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "submitProductReview.graphql",
                "variablesKey": "productReviewInput",
                "outputKey": "submitProductReviewResponse",
                "outputDataPath": "body.data.submitProductReview"
            },
            "condition": "context.ratingRequestInfo.rating_target === 'Product'"
        },
        {
            "name": "generate-beckn-response",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "on-rating-beckn-response.jsonata",
                "outputKey": "becknResponse"
            }
        }
    ],
    "support": [
        {
            "name": "construct-beckn-response-context",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "construct-beckn-response-context.jsonata",
                "outputKey": "becknResponseContext",
                "common": "true"
            }
        },
        {
            "name": "get-current-seller",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "currentSeller.graphql",
                "outputKey": "currentSellerResponse"
            }
        },
        {
            "name": "generate-beckn-response",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "on-support-beckn-response.jsonata",
                "outputKey": "becknResponse"
            }
        }
    ],
    "update": [
        {
            "name": "construct-beckn-response-context",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "construct-beckn-response-context.jsonata",
                "outputKey": "becknResponseContext",
                "common": "true"
            }
        },
        {
            "name": "extract-update-params",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "update-beckn-request.jsonata",
                "outputKey": "updateRequest"
            }
        },
        {
            "name": "construct-beckn-order-input-from-order",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "construct-beckn-order-input-from-beckn-order.jsonata",
                "outputKey": "getBecknOrderInput",
                "common": "true"
            }
        },
        {
            "name": "get-vendure-token",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getVendureToken.graphql",
                "variablesKey": "getBecknOrderInput",
                "outputKey": "vendureToken",
                "outputDataPath": "body.data.getVendureToken"
            }
        },
        {
            "name": "get-beckn-order",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getBecknOrder.graphql",
                "variablesKey": "getBecknOrderInput",
                "outputKey": "becknOrderInitial",
                "outputDataPath": "body.data.getBecknOrder"
            }
        },
        {
            "name": "construct-update-digital-fulfillment-line-input",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "construct-update-digital-fulfillment-line-input.jsonata",
                "outputKey": "updateDigitalFulfillmentLineInput",
                "common": "true"
            },
            "condition": "context.updateRequest.isFulfillmentStateUpdate"
        },
        {
            "name": "update-digital-fulfillment-line",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "updateDigitalFulfillmentLine.graphql",
                "variablesKey": "updateDigitalFulfillmentLineInput",
                "outputKey": "updateDigitalFulfillmentLineResponse",
                "outputDataPath": "body.data.updateDigitalFulfillmentLine"
            },
            "condition": "context.updateRequest.isFulfillmentStateUpdate"
        },
        {
            "name": "set-order-shipping-address",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "setOrderShippingAddress.graphql",

                "variablesKey": "updateRequest.shippingAddressUpdateDetails",
                "outputKey": "setOrderShippingAddressResult",
                "outputDataPath": "body.data",
                "vendureAuthTokenKey": "updateRequest.order_id"
            },
            "condition": "context.updateRequest.isShippingAddressUpdate"
        },
        {
            "name": "get-beckn-order",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "getBecknOrder.graphql",
                "variablesKey": "getBecknOrderInput",
                "outputKey": "becknOrder",
                "outputDataPath": "body.data.getBecknOrder"
            }
        },
        {
            "name": "get-current-seller",
            "type": "send-graphql-request",
            "args": {
                "graphqlFilename": "currentSeller.graphql",
                "outputKey": "currentSellerResponse"
            }
        },
        {
            "name": "generate-beckn-response",
            "type": "transform-and-add",
            "args": {
                "jsonataFilename": "on-status-beckn-response.jsonata",
                "outputKey": "becknResponse"
            }
        }
    ]
}
